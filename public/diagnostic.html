<!DOCTYPE html>
<html>
<head>
    <title>SIIFMART Diagnostic</title>
    <style>
        body { font-family: monospace; padding: 20px; background: #111; color: #0f0; }
        .status { margin: 10px 0; padding: 10px; background: #222; }
        .ok { color: #0f0; }
        .error { color: #f00; }
    </style>
</head>
<body>
    <h1>SIIFMART Diagnostic Page</h1>
    <div id="output"></div>
    
    <script>
        const output = document.getElementById('output');
        let reloadCount = 0;
        
        function log(msg, isError = false) {
            const div = document.createElement('div');
            div.className = 'status ' + (isError ? 'error' : 'ok');
            div.textContent = `[${new Date().toLocaleTimeString()}] ${msg}`;
            output.appendChild(div);
        }
        
        // Check if page is reloading
        reloadCount = parseInt(sessionStorage.getItem('reloadCount') || '0') + 1;
        sessionStorage.setItem('reloadCount', reloadCount);
        
        log(`Page loaded (Reload count: ${reloadCount})`);
        
        if (reloadCount > 3) {
            log('WARNING: Page has reloaded ' + reloadCount + ' times!', true);
        }
        
        // Monitor for reloads
        let lastTime = Date.now();
        setInterval(() => {
            const now = Date.now();
            const diff = now - lastTime;
            if (diff > 2000) {
                log(`Time gap detected: ${diff}ms - possible reload`, true);
            }
            lastTime = now;
            log(`Still alive... (uptime: ${Math.floor((now - performance.timing.navigationStart) / 1000)}s)`);
        }, 1000);
        
        // Check for auto-reload scripts
        log('Checking for auto-reload mechanisms...');
        if (window.location.search.includes('reload')) {
            log('URL contains reload parameter!', true);
        }
        if (document.querySelector('meta[http-equiv="refresh"]')) {
            log('Meta refresh tag found!', true);
        }
        
        log('Diagnostic page ready. Watch for reload patterns.');
    </script>
</body>
</html>
